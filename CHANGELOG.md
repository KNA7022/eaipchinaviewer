# 更新日志

## [1.7.1+11] - 2024-12-25

### 🔧 组件优化
- **能见度可视化组件优化**: 修复能见度组件显示问题
  - 修复数据类型使用错误
  - 优化组件渲染逻辑
  - 提高组件稳定性

## [1.7.0] - 2024-12-19

### 🚀 主要新增功能
- **平台差异化更新机制**: Windows和Android平台使用不同的更新流程
  - Windows: 直接跳转下载页面
  - Android: 保持APK自动下载安装
- **分平台版本配置**: 支持独立的版本配置文件
  - `version_windows.json` (Windows专用)
  - `version_android.json` (Android专用)
  - `version.json` (通用兼容)

### 🔧 缓存管理系统全面优化
- **修复PDF缓存清理**: 解决PDF缓存无法正确清除的问题
- **全面缓存清理**: 新增应用缓存目录和支持目录清理
- **智能缓存统计**: 增强缓存统计显示
  - PDF文件缓存数量统计
  - 其他偏好设置缓存统计
  - 应用缓存目录文件统计
- **旧版本数据清理**: 自动清理旧应用版本遗留数据

### 💡 用户界面改进
- 设置页面新增详细缓存统计信息显示
- 优化缓存清理操作的用户反馈体验
- 改进跨平台更新提示界面

### 🛠️ 技术改进
- 新增 `_clearPdfCache()` 专用PDF缓存清理方法
- 新增 `_clearAppCache()` 应用缓存清理方法
- 重构更新服务，实现平台自动检测
- 优化 `SharedPreferences` 清理逻辑，保留重要设置
- 改进缓存统计算法，提供更准确的数据

### 🐛 问题修复
- 修复PDF缓存无法清除的核心问题
- 修复旧版本应用数据残留问题
- 优化缓存统计准确性
- 改进跨平台更新兼容性

### 📋 升级说明
- Android用户: 自动更新，一键安装
- Windows用户: 手动下载安装
- 建议首次更新后执行"清除缓存"清理旧数据

## [1.2.0] - 2025-03-18

### 新增功能
- 添加机场天气查询功能（METAR/TAF）
- 增加天气报文自动翻译功能
- 添加用户协议与隐私政策
- 增加法律条款同意机制
- 优化文件缓存管理系统

### 改进
- 优化刷新机制，增加15秒冷却时间
- 改进天气数据缓存逻辑（15分钟）
- 增加报文长按复制功能
- 优化设置界面布局
- 增加保密提示提醒

### 技术改进
- 新增天气API接口集成
- 添加报文解析与翻译引擎
- 优化缓存清理机制
- 改进错误处理机制
- 完善应用权限管理

### 修复
- 修复PDF加载问题
- 修复验证码刷新逻辑
- 改进离线状态处理
- 优化内存使用

## [1.1.0] - 2025-03-17

### 新增功能
- 添加记住账号密码功能
- 增加网络连接状态检测
- PDF查看器支持长按保存和分享功能
- 添加离线状态提示

### 改进
- 优化了PDF加载和显示性能
- 改进了验证码加载机制，支持离线状态处理
- 增加了PDF页面指示器
- 优化了用户登录体验

### 技术改进
- 新增网络状态监听服务
- 改进了凭据管理系统
- 优化了文件存储权限处理
- 增加了文件分享功能支持

### 修复
- 修复了验证码刷新问题
- 修复了PDF文件保存路径问题
- 改进了网络错误处理机制

## [1.0.0] - 2025-03-15

### 初始版本
- 基础登录功能
- PDF查看功能
- 航图目录浏览
- 搜索功能
